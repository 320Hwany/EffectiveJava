# 아이템 67 - 최적화는 신중히 하라

성능 때문에 견고한 구조를 희생해서는 안됩니다. 빠른 프로그램보다는 좋은 프로그램을 작성해야 합니다.      
좋은 프로그램이지만 원하는 성능이 나오지 않는다면 그 아키텍처 자체가 최적화할 수 있는 길을 안내해줄 것입니다.    
좋은 프로그램은 정보 은닉 원칙을 따르므로 개별 구성요소의 내부를 독립적으로 설계할 수 있습니다.      
따라서 시스템의 나머지에 영향을 주지 않고도 각 요소를 다시 설계할 수 있습니다.     

성능 문제를 무시하라는 것이 아니라 구현상의 문제는 나중에 최적화할 수 있지만 아키텍처의 결함이 성능을    
제한하는 상황이라면 시스템 전체를 다시 작성하지 않고는 해결하기 불가능하기 때문입니다.         

성능을 제한하는 설계는 피하고 API를 설계할 때 성능에 주는 영향을 고려해야 합니다.      
예를들어 안좋은 예시로 public 타입을 가변으로 만들고 컴포지션으로 해결할 수 있지만 상속을 사용하고     
인터페이스도 있는데 굳이 구현 타입의 사용이 있습니다.        
하지만 성능을 위해 API를 왜곡하는 것은 매우 안좋은 생각이며 각각의 최적화 시도 전후로 성능을 측정해야 합니다.      

## 정리

보통 좋은 프로그램을 작성하다보면 성능은 따라오기 마련입니다.     
하지만 시스템을 설계할 때 특히 API, 네트워크 프로토콜, 영구 저장용 데이터 포맷을 설계할 때는     
성능을 염두에 두어야 합니다.      
시스템 구현을 완료 했다면 성능을 측정해보고 충분히 빠르다면 그것을 끝이고 그렇지 않다면 프로파일러를 사용해     
문제의 원인이 되는 지점을 찾아 최적화를 수행해야 합니다.       